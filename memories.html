<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css"/>
    <title>A Valentine's Journey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <a href="next.html" id="back-button">‚Üê Back</a>
    
    <div id="gallery-container">
        <div id="photo-gallery">
            <div class="gallery-item">
                <img src="gallery/IMG_1846.jpeg" alt="Photo 1" loading="lazy">
                <figcaption>August 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_2499.JPG" alt="Photo 2" loading="lazy">
                <figcaption>September 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_2502.JPG" alt="Photo 3" loading="lazy">
                <figcaption>September 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_3017.JPG" alt="Photo 4" loading="lazy">
                <figcaption>October 17, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_3198.JPG" alt="Photo 5" loading="lazy">
                <figcaption>October 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4150.JPG" alt="Photo 6" loading="lazy">
                <figcaption>November 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4151.JPG" alt="Photo 7" loading="lazy">
                <figcaption>November 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4158.JPG" alt="Photo 8" loading="lazy">
                <figcaption>November 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4712.JPG" alt="Photo 9" loading="lazy">
                <figcaption>December 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4724.JPG" alt="Photo 10" loading="lazy">
                <figcaption>December 23, 2024</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_5489.JPG" alt="Photo 11" loading="lazy">
                <figcaption>January 24, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_5971.JPG" alt="Photo 12" loading="lazy">
                <figcaption>February 14, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_5405.jpeg" alt="Photo 13" loading="lazy">
                <figcaption>February 14, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_6000.jpeg" alt="Photo 14" loading="lazy">
                <figcaption>February 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_6670.jpeg" alt="Photo 15" loading="lazy">
                <figcaption>March 27, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_7346.jpeg" alt="Photo 16" loading="lazy">
                <figcaption>April 25, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4814.jpeg" alt="Photo 7" loading="lazy">
                <figcaption>May 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_9246.jpeg" alt="Photo 18" loading="lazy">
                <figcaption>June 21, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_9312.jpeg" alt="Photo 19" loading="lazy">
                <figcaption>June 25, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_0281.jpeg" alt="Photo 20" loading="lazy">
                <figcaption>July 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_0590.jpeg" alt="Photo 21" loading="lazy">
                <figcaption>August 14, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/lp_image.jpeg" alt="Photo 22" loading="lazy">
                <figcaption>September 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4862.JPG" alt="Photo 22" loading="lazy">
                <figcaption>October 12, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/DSC03744.jpeg" alt="Photo 23" loading="lazy">
                <figcaption>November 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/DSC03749.jpeg" alt="Photo 24" loading="lazy">
                <figcaption>November 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/DSC03753.jpeg" alt="Photo 25" loading="lazy">
                <figcaption>November 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/lp_image 2.jpeg" alt="Photo 26" loading="lazy">
                <figcaption>December 23, 2025</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/IMG_4705.jpeg" alt="Photo 26" loading="lazy">
                <figcaption>January 5, 2026</figcaption>
            </div>
            <div class="gallery-item">
                <img src="gallery/DB8C5C0C-EEB1-4042-BD51-3E0E1CFBDCDB.jpg" alt="Photo 26" loading="lazy">
                <figcaption>February 14, 2026</figcaption>
            </div>
        </div>
        <div id="sprite"></div>
        <div id="progress-bar-container">
            <div id="progress-bar"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        const sprite = document.getElementById('sprite');
        const progressBar = document.getElementById('progress-bar');
        const gallery = document.getElementById('photo-gallery');

        
        let worldX = 0;
        let animationFrame = 0;
        let animationInterval;

        const moveSpeed = 4;
        const maxWorldX = 2000;

        // Sprite image paths
        const sprites = {
            idleFront: 'assets/sprite000.png',
            walkRight1: 'assets/sprite014.png',
            walkRight2: 'assets/sprite015.png',
            walkLeft1: 'assets/sprite010.png',
            walkLeft2: 'assets/sprite011.png'
        };

        sprite.style.backgroundImage = `url('${sprites.idleFront}')`;

        function updateProgress() {
            const progress = Math.min((worldX / maxWorldX) * 100, 100);
            progressBar.style.width = progress + '%';
        }

        function startWalkAnimation(direction) {
            if (animationInterval) clearInterval(animationInterval);
            
            animationInterval = setInterval(() => {
                animationFrame = (animationFrame + 1) % 2;
                if (direction === 'right') {
                    sprite.style.backgroundImage = `url('${animationFrame === 0 ? sprites.walkRight1 : sprites.walkRight2}')`;
                } else {
                    sprite.style.backgroundImage = `url('${animationFrame === 0 ? sprites.walkLeft1 : sprites.walkLeft2}')`;
                }
            }, 150);
        }

        function stopWalkAnimation() {
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
            }
            sprite.style.backgroundImage = `url('${sprites.idleFront}')`;
        }

        const keysPressed = {};

        document.addEventListener('keydown', (e) => {
            if (keysPressed[e.key]) return;
            keysPressed[e.key] = true;

            if (e.key === 'ArrowRight') {
                startWalkAnimation('right');
            } else if (e.key === 'ArrowLeft') {
                startWalkAnimation('left');
            }
        });

        document.addEventListener('keyup', (e) => {
            keysPressed[e.key] = false;

            if (e.key === 'ArrowRight' || e.key === 'ArrowLeft') {
                if (!keysPressed['ArrowRight'] && !keysPressed['ArrowLeft']) {
                    stopWalkAnimation();
                } else if (keysPressed['ArrowRight']) {
                    startWalkAnimation('right');
                } else if (keysPressed['ArrowLeft']) {
                    startWalkAnimation('left');
                }
            }
        });

        function gameLoop() {
            const containerWidth = gallery.parentElement.clientWidth;
            const spriteWidth = sprite.offsetWidth;
            const galleryWidth = gallery.scrollWidth;

            const leftThreshold = 100;
            const rightThreshold = containerWidth - spriteWidth - 100;

            // Move worldX
            if (keysPressed['ArrowRight']) worldX += moveSpeed;
            if (keysPressed['ArrowLeft']) worldX = Math.max(0, worldX - moveSpeed);

            // Max worldX
            const maxWorld = galleryWidth - spriteWidth;
            worldX = Math.min(worldX, maxWorld);

            // Sprite and gallery logic
            if (worldX < leftThreshold) {
                // sprite moves freely on left
                sprite.style.left = worldX + "px";
                gallery.style.transform = "translateX(0px)";
            } else if (worldX > maxWorld - (containerWidth - rightThreshold)) {
                // sprite moves freely near right edge when gallery cannot scroll more
                const spriteX = worldX - (maxWorld - (containerWidth - rightThreshold));
                sprite.style.left = spriteX + "px";
                gallery.style.transform = `translateX(${- (galleryWidth - containerWidth)}px)`;
            } else {
                // sprite stays in middle, gallery scrolls
                sprite.style.left = leftThreshold + "px";
                gallery.style.transform = `translateX(${- (worldX - leftThreshold)}px)`;
            }

            updateProgress();
            requestAnimationFrame(gameLoop);
        }



        updateProgress();
        gameLoop();
    </script>
</body>
</html>